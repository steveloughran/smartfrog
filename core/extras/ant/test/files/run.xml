<?xml version="1.0"?>
<project name="run">

<description>
 Tests for the run. 
 
 command line invocation
 ant -lib ..\..\build\dist\lib\smartfrog-tasks.jar -lib ..\..\..\..\smartfrog\dist\lib\smartfrog.jar -f  run.xml testNoParams

ant -lib ../../build/dist/lib/smartfrog-tasks.jar -lib ../../../../smartfrog/dist/lib/smartfrog.jar -f run.xml testNoParams

ant -lib ../../build/dist/lib/smartfrog-tasks.jar -lib ../../../../smartfrog/dist/lib/smartfrog.jar -lib ../../../../smartfrog/dist/lib/sfExamples.jar -f run.xml testResource
</description>

    <import file="test-common.xml" />
  
    <target name="testNoParams">
      <sf-run />
    </target>
    
    <target name="testNoFailure">
      <sf-run failonerror="false"/>
    </target>
    
    <target name="testEmptyApplication">
      <sf-run >
        <application />
      </sf-run>
    </target>    

    <target name="testAnonApplication">
      <sf-run >
        <application descriptor="${resource.sf}" />
      </sf-run>
    </target>    

    <target name="testDatalessApplication">
      <sf-run >
        <application name="app" />
      </sf-run>
    </target> 

    
    <target name="testBadFile">
      <sf-run >
        <application name="app" file="missing-file.sf"/>
      </sf-run>
    </target>  

    
    <target name="testBadHost">
      <sf-run host="no-such-hostname"/>
    </target>

    
    <target name="testResource">
      <sf-run >
        <application name="app" descriptor="${resource.sf}"/>
      </sf-run>
    </target> 

    <target name="testStackTrace">
      <sf-run logStackTraces="true">
        <application name="app" file="invalid.sf"/>
      </sf-run>
    </target> 
    
    <target name="testRunFile">
      <sf-run >
        <application name="app" file="valid.sf"/>
      </sf-run>
    </target>
    
    
    <target name="testSubdir">
      <sf-run >
        <application name="app" file="subdir/subfile.sf"/>
      </sf-run>
    </target>
    
    <target name="testAssertions">
      <sf-run >
        <application name="app" descriptor="${resource.sf}"/>
        <assertions enableSystemAssertions="true">
          <enable/>
        </assertions>
      </sf-run>
    </target> 
    
    <target name="testInline">
    <property name="port" value="8080"/>
      <sf-run >
        <application name="app">
#include "org/smartfrog/components.sf"

Server extends Prim {
	port ${port};
}

sfConfig extends Server{
}        
        </application>
      </sf-run>
    </target>
    
</project>      
