<?xml version="1.0"?>
<project name="webstart" default="default">

  <!--
  /** (C) Copyright 1998-2004 Hewlett-Packard Development Company, LP

  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation; either
  version 2.1 of the License, or (at your option) any later version.

  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.

  You should have received a copy of the GNU Lesser General Public
  License along with this library; if not, write to the Free Software
  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

  For more information: www.smartfrog.org

  */
  -->

  <description>
     Build file for CDDLM.
     
     After deploying, get the WSDL From
     http://localhost:5050/axis/services/cddlm?wsdl
     
     Then deploy demos like
     org/smartfrog/examples/subprocesses/subprocess.sf
     org/smartfrog/examples/counter/example.sf

  </description>

  <!-- override point -->
  <property file="build.properties"/>


  <property name="root.dir" location="../.."/>
  <!-- Import common stuff -->
  <import file="${root.dir}/common.xml"/>


  <!-- ========================================================== -->
  <!-- ========================================================== -->
  <target name="init" depends="init-standard-output-dirs,use-smartfrog-tasks">
    <property name="war.name" value="sfwebstart.war" />
    <property name="war.file" location="${dist.dir}/${war.name}" />
    <property name="web.dir" location="web"/>
    <property name="web-inf.dir" location="${web.dir}/WEB-INF"/>
    <property name="war.dir" location="${build.dir}/${war.name}"/>
    <property name="web.xml" location="${web-inf.dir}/web.xml"/>
  </target>

  <target name="makewar" depends="compile"
    description="make the war file" >
    <war destfile="${war.file}"
        webxml="${web.xml}"
        update="true" >
      <!-- web resources in webapp -->
      <fileset dir="${web.dir}" excludes="WEB-INF/web.xml" />
      <!--pull in the smartfrog redistributables -->
      <zipfileset prefix="download" dir="${smartfrog.dist.lib.dir}">
        <include name="**/*.jar"/>
      </zipfileset>
      <!--servlet libraries -->
      <lib dir="${lib.dir}"/>
    </war>
  </target>


  <target name="postwar" depends="makewar"
    description="expand the war file" >
    <unwar src="${war.file}" dest="${war.dir}" />
  </target>

  <target name="default" depends="postwar"
  description="make the WAR" />
 </project>