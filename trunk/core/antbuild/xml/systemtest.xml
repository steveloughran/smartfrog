<?xml version="1.0" ?>
<project name="systemtest" 
  xmlns:core="http://smartfrog.org/build/core"
  xmlns:ac="antlib:net.sf.antcontrib"
  xmlns:sf="antlib:org.smartfrog.tools.ant"
  xmlns:m2="antlib:org.apache.maven.artifact.ant"
  >
  
  <description>
  All the targets for system tests
  This overrides some stuff in unittest
  </description>
  
  <!-- import the core -->
  <import file="unittest.xml"/>

 
  <!-- ========================================================== -->
  <!-- this is an override point -->
  <!-- system tests : anything that is tested on a live daemon 
       not to be run on public machines for
       security reasons, unless security is active-->

   <target name="system-tests" depends="init,dist,package-tests"
    if="system.tests.enabled"
    description="run the unit tests if unit.tests.enabled is set">
    <core:junit
      errorProperty="test.failed"
      failureProperty="test.failed"
      includeAntRuntime="true"
      >
      <sysproperty key="test.classes.dir"
        value="${test.classes.dir}"/>
      <classpath>
        <path refid="tests.run.classpath"/>
      </classpath>
      <batchtest todir="${test.data.dir}" >
        <!-- bulk test case -->
        <fileset dir="${test.classes.dir}">
          <include name="org/smartfrog/**/system/**/*Test.class"/>
        </fileset>
      </batchtest>
    </core:junit>
  </target> 
  
</project>    
