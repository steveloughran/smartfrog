<?xml version="1.0"?>
<project name="parse">

<description>
 Tests for the parse. 
 
 command line invocation
 ant -lib ..\..\build\dist\lib\smartfrog-tasks.jar -lib ..\..\..\..\smartfrog\dist\lib\smartfrog.jar -f  run.xml testNoParams

ant -lib ../../build/dist/lib/smartfrog-tasks.jar -lib ../../../../smartfrog/dist/lib/smartfrog.jar -f run.xml testNoParams

ant -lib ../../build/dist/lib/smartfrog-tasks.jar -lib ../../../../smartfrog/dist/lib/smartfrog.jar -lib ../../../../smartfrog/dist/lib/sfExamples.jar -f run.xml testResource
</description>

  <typedef 
    resource="org/smartfrog/tools/ant/tasks.properties"
    />
      
   <property name="resource.sf" 
    value="org/smartfrog/examples/functions/function.sf" />
   
    <target name="testNoParams">
      <sf-run />
    </target>
    
    <target name="testNoFailure">
      <sf-run failonerror="false"/>
    </target>
    
    <target name="testEmptyApplication">
      <sf-run >
        <application />
      </sf-run>
    </target>    

    <target name="testAnonApplication">
      <sf-run >
        <application descriptor="${resource.sf}" />
      </sf-run>
    </target>    

    <target name="testDatalessApplication">
      <sf-run >
        <application name="app" />
      </sf-run>
    </target> 

    
    <target name="testBadFile">
      <sf-run >
        <application name="app" file="missing-file.sf"/>
      </sf-run>
    </target>  

    
    <target name="testBadHost">
      <sf-run host="no-such-hostname"/>
    </target>

    
    <target name="testResource">
      <sf-run >
        <application name="app" descriptor="${resource.sf}"/>
      </sf-run>
    </target> 

    <target name="testStackTrace">
      <sf-run logStackTraces="true">
        <application name="app" file="invalid.sf"/>
      </sf-run>
    </target> 
    
    <target name="testRunFile">
      <sf-run >
        <application name="app" file="valid.sf"/>
      </sf-run>
    </target>
    
    
    <target name="testSubdir">
      <sf-run >
        <application name="app" file="subdir/subfile.sf"/>
      </sf-run>
    </target>
    
    <target name="testAssertions">
      <sf-run >
        <application name="app" descriptor="${resource.sf}"/>
        <assertions enableSystemAssertions="true">
          <enable/>
        </assertions>
      </sf-run>
    </target> 
    
</project>      
